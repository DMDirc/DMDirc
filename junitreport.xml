<?xml version="1.0" encoding="UTF-8"?>
<!-- You may freely edit this file. See commented blocks below for -->
<!-- some examples of how to customize the build. -->
<!-- (If you delete it and reopen the project it will be recreated.) -->
<project name="DMDirc" default="default" basedir=".">
    <description>Builds, tests, and runs the project DMDirc.</description>

    <property name="clover.jar" location="/home/dmdirc/clover/clover/lib/clover.jar"/>
    <taskdef resource="cloverlib.xml" classpath="${clover.jar}"/>
    <available property="clover.installed" classname="com.cenqua.clover.CloverInstr" />

    <target name="with.clover" depends="clean" if="clover.installed">
        <clover-setup>
            <fileset dir="src/com/" includes="**/*.java" />
            <fileset dir="test/com/" includes="**/*.java" />
        </clover-setup>
    </target>

    <target name="clover.xml" if="clover.installed">
        <mkdir dir="reports/clover" />
        <mkdir dir="reports/clover/history" />
        <clover-historypoint historydir="reports/clover/history" />
        <clover-report>
         <current outfile="reports/clover/clover.xml"/>
        </clover-report>
    </target>

    <target name="clover.html" if="clover.installed">
        <mkdir dir="reports/clover" />
        <mkdir dir="reports/clover/history" />
        <clover-historypoint historydir="reports/clover/history" />
        <clover-report>
         <current outfile="reports/clover">
          <format type="html"/>
         </current>
         <historical outfile="reports/clover" historydir="reports/clover/history" />
        </clover-report>
    </target>

    <import file="nbproject/build-impl.xml"/>
    <property file="nbproject/project.properties"/>
    <property name="test.reports" value="./junitreports" />

		
   <target name="test-html" depends="with.clover,compile-test,test,clover.html"/>
   <target name="test-xml" depends="with.clover,compile-test,test,clover.xml"/>
   <target name="-post-test-run">
      <junitreport todir="${test.reports}">
        <fileset dir="${build.test.results.dir}">
          <include name="TEST-*.xml" />
        </fileset>
        <report todir="${test.reports}" />
      </junitreport>
    </target>
</project>
