---

machine:
  environment:
    TERM: dumb

checkout:
  override:
    - git clone https://github.com/DMDirc/Meta.git DMDirc
    - git submodule update --init --remote
    - cd DMDirc/client
    - git fetch origin $CIRCLE_BRANCH:circleci
    - git fetch --tags
    - git checkout circleci
  post:
    - git fetch --tags

dependencies:
  override:
    - ./gradlew --parallel client:dependencies plugins:dependencies

test:
  override:
    - ./gradlew --stacktrace --parallel client:test
